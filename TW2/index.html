<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Ghost Letters</title>
      
      <style>
         body {
            margin: 0;
            background: black;
            overflow: hidden;
         }
         
         .typewriter-text {
            font-family: "Courier New", monospace;
         }

         #tw2roll {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
         }

         #paperWrap {
            position: fixed;
            top: 400px;
            left: 50%;
            transform: translateX(-50%);
            width: 1000px;
            z-index: 2;
}

#tw2paper {
   width: 100%;
   display: block;
}
            
         
         #tw2bottom {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
         }
         #typedText {
            position: absolute;
            top: 300px;
            left: 200px;
            color: black;
            font-size: 20px;
            font-family: "Courier New", monospace;
            white-space: pre-wrap;
}
      
    </style>
  </head>

   
<body>
   <img id="tw2roll" src="images/tw2roll.png">
   <div id="paperWrap">
   <img id="tw2paper" src="images/tw2paper.png">
   </div>
     <div id="typedText" class="typewriter-text">
     </div>
   <img id="tw2bottom" src="images/tw2bottom.png">
 

   <script>
      const paper = document.getElementById("paperWrap");
      const roll = document.getElementById("tw2roll");

      paper.style.top = "400px";

      const machineMin = -400;
      const machineMax = 400;
      let machineX = 0;
      
      let paperY =0;
      const maxLines = -1150;
      const step = 20; 

      let pageFinished = false;

      const stampX = window.innerWidth / 2;
      const stampY = window.innerHeight * 0.7; 

      document.addEventListener("keydown", function(e) {
         if (pageFinished) return;
         if (e.key.length !== 1) return;

   const paperRect = paper.getBoundingClientRect();
   
   const localX = stampX - paperRect.left;
   const localY = stampY - paperRect.top;

   const letter = document.createElement("div");
   letter.textContent = e.key;

   letter.style.position = "absolute";
   letter.style.left = localX + "px";
   letter.style.top = localY + "px";
   letter.style.fontFamily = '"Courier New", monospace';
   letter.style.fontSize = "20px";
   letter.style.color = "black";

   paper.appendChild(letter);
});
      
      document.addEventListener("keyup", (e) => {
         if (pageFinished) return;
         
         if (e.key === "Backspace") {
            machineX += step;
            e.preventDefault();
         }

         else if (e.key === "Enter") {
            if (paperY > maxLines) {
               paperY -= 20;
               machineX = machineMax;
            } 
            else {
               pageFinished = true;
               machineX = 0;
               paperY = 0;
               paper.style.zIndex = "15";
               
               paper.style.top = "auto";
               paper.style.left = "auto";
               
               paper.style.position = "fixed";
               paper.style.top = "50%";
               paper.style.left = "50%";
               paper.style.transform = "translate(-50%, -50%) scale(0.4)";
            }
         }
         else {
         machineX -= step;
         }
         
         if (machineX < machineMin) machineX = machineMin;
         if (machineX > machineMax) machineX = machineMax;

      updatePosition();
   });

   function updatePosition() {
      if (pageFinished) return;
      paper.style.transform =`translateX(-50%) translateX(${machineX}px) translateY(${paperY}px)`;
      roll.style.transform = `translateX(-50%) translateX(${machineX}px)`;
   }
</script>
   
   
   
  
</body>  
</html>
